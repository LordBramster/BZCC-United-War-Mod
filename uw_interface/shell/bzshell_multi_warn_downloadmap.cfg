//
// CREATE THE WINDOW TELLING PEOPLE TO UPGRADE
//
CreateControl("MultiWarningDownloadMap", "STATIC")
{
	ColorGroup("BACKGROUND");
	Geom("PARENTWIDTH", "PARENTHEIGHT");
	Style("MODAL");

	CreateControl("Window", "STATIC")
	{
		Geom("HCENTRE", "VCENTRE");
		Pos(0, 5);
		Size(300, 150);
		Style("MODAL", "TABROOT", "OUTLINE");
		//Style("TABROOT", "OUTLINE");
		BorderSize(10);
		BevelSize(5);
		TabSize(130, 10);
		TitleFont("MEDIUM");
		Title("Map not present");
		ForceOpaqueBackground();

		//
		// create the text display
		//
		CreateControl("Text", "LISTBOX")
		{
			ColorGroup("BACKGROUND");
			Pos(0, 0);
			Size(300, 110);
			CellSize(285, 12);
			BorderSize(5);
			BevelSize(3);
			SliderPadding(5);
			Font("TINY");
			Style("INERT", "NOSELECTION", "VSLIDER");
			ItemConfig()
			{
				Style("TRANSPARENT");
			}
			FillFromFile("bzshell_multi_warn_downloadmap.txt");
		}

		//
		// create the ok button
		//
		CreateControl("OK", "BUTTON")
		{
			ColorGroup("LISTBOX");
			Geom("LEFT", "BOTTOM");
			Pos(5, -5);
			Size(50, 10);
			BorderSize(5);
			BevelSize(3);
			Font("MEDIUM");
			Text("OK");
			Style("ROLLOVER", "OUTLINE");
			NotifyParent("Button::Press", "OK");
		}
		CreateControl("Download", "BUTTON")
		{
			ColorGroup("LISTBOX");
			Geom("RIGHT", "BOTTOM");
			Pos(-5, -5);
			Size(100, 10);
			BorderSize(5);
			BevelSize(3);
			Font("MEDIUM");
			Text("Download");
			Style("ROLLOVER", "OUTLINE");
			NotifyParent("Button::Press", "Download");
		}

		OnEvent("Control::ActivateSelf")
		{
			Cmd("network.session.listoff");
		}

		OnEvent("Control::DeactivateSelf")
		{
			Cmd("network.session.liston");
		}

		// handle the ok event
		OnEvent("OK")
		{
			FadeOut("|MultiWarningDownloadMap");
		}
		// handle the download event
		OnEvent("Download")
		{
			Cmd("network.downloadmap");
			FadeOut("|MultiWarningDownloadMap");
		}
	}
}
