//
// CREATE THE WINDOW TELLING PEOPLE TO UPGRADE
//
CreateControl("WarningCrashLogged", "STATIC")
{
	ColorGroup("BACKGROUND");
	Geom("PARENTWIDTH", "PARENTHEIGHT");
	Style("MODAL");

	CreateControl("Window", "STATIC")
	{
		Geom("HCENTRE", "VCENTRE");
		Pos(0, 5);
		Size(300, 120);
		Style("MODAL", "TABROOT", "OUTLINE");
		//Style("TABROOT", "OUTLINE");
		BorderSize(10);
		BevelSize(5);
		TabSize(130, 10);
		TitleFont("MEDIUM");
		Title("BZ2 Crashed in the past :(");
		ForceOpaqueBackground();

		//
		// create the text display
		//
		CreateControl("Text", "LISTBOX")
		{
			ColorGroup("BACKGROUND");
			Pos(0, 0);
			Size(300, 110);
			CellSize(285, 11);
			BorderSize(5);
			BevelSize(3);
			SliderPadding(5);
			Font("TINY");
			Style("INERT", "NOSELECTION", "VSLIDER");
			ItemConfig()
			{
				Style("TRANSPARENT");
			}
			FillFromFile("bzshell_warn_crashlogged.txt");
		}

		//
		// create the ok button
		//
		CreateControl("OK", "BUTTON")
		{
			ColorGroup("LISTBOX");
			Geom("LEFT", "BOTTOM");
			Pos(5, -5);
			Size(50, 10);
			BorderSize(5);
			BevelSize(3);
			Font("MEDIUM");
			Text("OK");
			Style("ROLLOVER", "OUTLINE");
			NotifyParent("Button::Press", "OK");
		}
		CreateControl("Report", "BUTTON")
		{
			ColorGroup("LISTBOX");
			Geom("RIGHT", "BOTTOM");
			Pos(-30, -5);
			Size(140, 10);
			BorderSize(5);
			BevelSize(3);
			Font("MEDIUM");
			Text("Report Crash");
			Style("ROLLOVER", "OUTLINE");
			NotifyParent("Button::Press", "ReportCrash");
		}

		// handle the ok event
		OnEvent("OK")
		{
			FadeOut("|WarningCrashLogged");
		}
		// handle the download event
		OnEvent("ReportCrash")
		{
			Cmd("network.openforums");
			FadeOut("|WarningCrashLogged");
		}
	}
}
