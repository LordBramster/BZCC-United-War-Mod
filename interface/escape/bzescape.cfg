// ========================
// BATTLEZONE ESCAPE SCREEN
// ========================

// create page variable
ConfigureVarSys()
{
	CreateInteger("options.page", 0);
	SetIntegerRange("options.page", 0, 4);
}

// load escape screen pages
Exec("bzescape_play.cfg");
Exec("bzescape_graphic.cfg");
Exec("bzescape_graphic2.cfg");
Exec("bzescape_sound.cfg");
Exec("bzescape_sound2.cfg");
Exec("bzescape_input.cfg");
Exec("bzescape_load.cfg");
Exec("bzescape_noreschange.cfg");

//
// CREATE THE ESCAPE SCREEN PANEL
//
CreateControl("EscapePanel", "WINDOW")
{
	Geom("PARENTWIDTH", "PARENTHEIGHT");
	Style("TRANSPARENT", "INERT");

	//
	// create the play options button
	//
	CreateControl("Play", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Position(20, 20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "RADIO", "OUTLINE");			// SIRBRAMBLEY
		Text("Play");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Play");
		UseVar("options.page");
		Value(0);
	}

	//
	// create the graphic options button
	//
	CreateControl("Graphic", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("RIGHT");
		Align("<Play");
		Position(30, 0);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "RADIO", "OUTLINE");			// SIRBRAMBLEY
		Text("Graphic");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Graphic");
		UseVar("options.page");
		Value(1);
	}

	//
	// create the sound options button
	//
	CreateControl("Sound", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("RIGHT");
		Align("<Graphic");
		Position(30, 0);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "RADIO", "OUTLINE");			// SIRBRAMBLEY
		Text("Sound");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Sound");
		UseVar("options.page");
		Value(2);
	}
	
	//
	// create the input options button
	//
	CreateControl("Input", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("RIGHT");
		Align("<Sound");
		Position(30, 0);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "RADIO", "OUTLINE");			// SIRBRAMBLEY
		Text("Input");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Input");
		UseVar("options.page");
		Value(3);
	}

	//
	// create the load options button
	//
	CreateControl("Load", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("RIGHT");
		Align("<Input");
		Position(30, 0);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "RADIO", "OUTLINE");			// SIRBRAMBLEY
		Text("File");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Select", "Load");
		UseVar("options.page");
		Value(4);
	}

	//
	// create the quit button
	//
	CreateControl("Quit", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("LEFT", "BOTTOM");
		Position(20, -20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "OUTLINE");
		Text("Abort");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Press", "Quit");
	}
	
	
	CreateControl("Restart", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("HCENTER", "BOTTOM");
		Position(0, -20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "OUTLINE");
		Text("Restart");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Press", "Restart");
	}

	//
	// create the resume button
	//
	CreateControl("Resume", "BUTTON")
	{
		ColorGroup("MAGENTA");
		Geometry("RIGHT", "BOTTOM");
		Position(-20, -20);
		Size(139, 0);
		BorderSize(10);
		BevelSize(0);
		// BevelSize(5);
		Image("ButtonF.tga", 0, 0, 860, 131);			// GBD
		Style("ROLLOVER", "OUTLINE", "RIGHTTAB");
		Text("Resume");
		Font("MEDIUM");
		Cursor("Highlight");
		NotifyParent("Button::Press", "Resume");
	}

	OnEvent("Control::ActivateSelf")
	{
		Cmd("options.page 0");
		Cmd("options.entered 1");
		Cmd("options.pauseentered");
		//		Activate("|EscapeBottom");
		Activate("|EscapePlay");
		Cmd("options.warnrestartchanges 1");
		Deactivate("|EscapePlay.AchMovCreGroup");
	}
	
		OnEvent("Control::Activate")
	{
		Deactivate("|EscapePlay.AchMovCreGroup");
	}

	OnEvent("Control::DeactivateSelf")
	{
		Cmd("options.save");
		Cmd("options.entered 0");
		Deactivate("|EscapePlay");
		Deactivate("|EscapeGraphic");
		Deactivate("|EscapeGraphic2");
		Deactivate("|EscapeSound");
		Deactivate("|EscapeSound2");
		Deactivate("|EscapeInput");
		Deactivate("|EscapeLoad");
		Cmd("options.warnrestartchanges 0");
	}

	OnEvent("Play")
	{
		FadeOut("|EscapeGraphic");
		FadeOut("|EscapeGraphic2");
		FadeOut("|EscapeSound");
		FadeOut("|EscapeSound2");
		FadeOut("|EscapeInput");
		FadeIn("|EscapePlay");
		FadeOut("|EscapeLoad");
		Deactivate("|EscapePlay.AchMovCreGroup");
		Cmd("options.warnrestartchanges 1");
	}

	OnEvent("Graphic")
	{
		FadeOut("|EscapePlay");
		FadeOut("|EscapeSound");
		FadeOut("|EscapeSound2");
		FadeOut("|EscapeInput");
		FadeOut("|EscapeGraphic2");
		Cmd("options.graphics.pageactivate 0");
		FadeOut("|EscapeLoad");
		Cmd("options.warnrestartchanges 1");
	}
	
	OnEvent("Sound")
	{
		FadeOut("|EscapePlay");
		FadeOut("|EscapeGraphic");
		FadeOut("|EscapeInput");
		FadeOut("|EscapeGraphic2");
		FadeOut("|EscapeSound2");
		FadeIn("|EscapeSound");
		FadeOut("|EscapeLoad");
		Cmd("options.warnrestartchanges 1");
	}

	OnEvent("Load")
	{
		FadeOut("|EscapePlay");
		FadeOut("|EscapeGraphic");
		FadeOut("|EscapeGraphic2");
		FadeOut("|EscapeSound2");
		FadeOut("|EscapeSound");
		FadeOut("|EscapeInput");
		FadeIn("|EscapeLoad");
		Cmd("options.warnrestartchanges 0");
	}

	OnEvent("Input")
	{
		FadeOut("|EscapePlay");
		FadeOut("|EscapeGraphic");
		FadeOut("|EscapeGraphic2");
		FadeOut("|EscapeSound2");
		FadeOut("|EscapeSound");
		FadeOut("|EscapeLoad");
		FadeIn("|EscapeInput");
		Cmd("options.warnrestartchanges 0");
	}

	OnEvent("Quit")
	{
		Cmd("mission.abort");
		Cmd("options.warnrestartchanges 0");
	}
	
		OnEvent("Restart")
	{
		Cmd("mission.restart");
		Cmd("options.warnrestartchanges 0");
	}

	OnEvent("Resume")
	{
		Cmd("mission.resume");
		Deactivate();
		Cmd("options.warnrestartchanges 0");
	}
}
